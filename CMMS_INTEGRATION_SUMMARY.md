# âœ… ÛŒÚ©Ù¾Ø§Ø±Ú†Ú¯ÛŒ Ø¨Ø§ Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ (CMMS) - Ø®Ù„Ø§ØµÙ‡ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ

## ğŸ“Š Ø®Ù„Ø§ØµÙ‡

ÛŒÚ©Ù¾Ø§Ø±Ú†Ú¯ÛŒ Ø¨Ø§ Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ (CMMS) Ø¨Ø±Ø§ÛŒ ØµØ¯ÙˆØ± Ø®ÙˆØ¯Ú©Ø§Ø± Ùˆ Ø¯Ø³ØªÛŒ Work Order Ø§Ø² AlertÙ‡Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯.

## ğŸ¯ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡

### 1. Ø§ÛŒØ¬Ø§Ø¯ Ø®ÙˆØ¯Ú©Ø§Ø± Work Order
- âœ… **Auto-create for Critical Alerts**: Ø§ÛŒØ¬Ø§Ø¯ Ø®ÙˆØ¯Ú©Ø§Ø± Work Order Ø¨Ø±Ø§ÛŒ AlertÙ‡Ø§ÛŒ Ø¨Ø­Ø±Ø§Ù†ÛŒ
- âœ… **Configurable**: Ù‚Ø§Ø¨Ù„ ØªÙ†Ø¸ÛŒÙ… Ø§Ø² Ø·Ø±ÛŒÙ‚ environment variable
- âœ… **Background Processing**: Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¯Ø± Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ø¨Ø¯ÙˆÙ† ØªØ£Ø«ÛŒØ± Ø¨Ø± Ø¹Ù…Ù„Ú©Ø±Ø¯

### 2. Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø³ØªÛŒ Work Order
- âœ… **Manual Creation**: Ø¯Ú©Ù…Ù‡ "Create Work Order" Ø¯Ø± Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Alerts
- âœ… **One-click Creation**: Ø§ÛŒØ¬Ø§Ø¯ Ø¨Ø§ ÛŒÚ© Ú©Ù„ÛŒÚ©
- âœ… **Status Display**: Ù†Ù…Ø§ÛŒØ´ Work Order ID Ù¾Ø³ Ø§Ø² Ø§ÛŒØ¬Ø§Ø¯
- âœ… **Duplicate Prevention**: Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø§ÛŒØ¬Ø§Ø¯ Work Order ØªÚ©Ø±Ø§Ø±ÛŒ

### 3. ÛŒÚ©Ù¾Ø§Ø±Ú†Ú¯ÛŒ Ø¨Ø§ ERP Systems
- âœ… **SAP Support**: Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² SAP
- âœ… **Oracle Support**: Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Oracle
- âœ… **Extensible**: Ù‚Ø§Ø¨Ù„ Ú¯Ø³ØªØ±Ø´ Ø¨Ø±Ø§ÛŒ Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø±

### 4. UI/UX
- âœ… **Button in Dashboard**: Ø¯Ú©Ù…Ù‡ Ø¯Ø± ØµÙØ­Ù‡ Alerts
- âœ… **Visual Feedback**: Ù†Ù…Ø§ÛŒØ´ Work Order ID
- âœ… **Loading States**: Ù†Ù…Ø§ÛŒØ´ ÙˆØ¶Ø¹ÛŒØª Ø¯Ø± Ø­Ø§Ù„ Ø§ÛŒØ¬Ø§Ø¯
- âœ… **Error Handling**: Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§Ù‡Ø§

## ğŸ“ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø§ÛŒØ¬Ø§Ø¯/Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯Ù‡

### Backend
- `backend/alert-service/main.py` - Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯Ù‡ (endpoint Ø¬Ø¯ÛŒØ¯)
- `backend/erp-integration-service/main.py` - Ù…ÙˆØ¬ÙˆØ¯ (endpoint auto-create)

### Frontend
- `frontend/web/src/pages/Alerts.tsx` - Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯Ù‡ (Ø¯Ú©Ù…Ù‡ Ùˆ Ù…Ù†Ø·Ù‚)
- `frontend/web/src/pages/Alerts.css` - Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯Ù‡ (Ø§Ø³ØªØ§ÛŒÙ„ Ø¯Ú©Ù…Ù‡)
- `frontend/web/src/api/services.ts` - Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯Ù‡ (API client)

## ğŸ”Œ API Endpoints

### Ø§ÛŒØ¬Ø§Ø¯ Work Order Ø§Ø² Alert
```
POST /api/alert/alerts/{alert_id}/create-work-order?erp_type=sap
```

**Response:**
```json
{
  "message": "Work order created successfully",
  "work_order_id": "SAP-WO-20250115103045",
  "erp_system": "SAP",
  "status": "created",
  "alert_id": "ALERT-001"
}
```

### Ø§ÛŒØ¬Ø§Ø¯ Ø®ÙˆØ¯Ú©Ø§Ø± (Ø§Ø² Alert Service)
```
POST /api/erp-integration/work-orders/auto-create?alert_id={alert_id}&erp_type=sap
```

## ğŸ¨ UI Components

### Ø¯Ú©Ù…Ù‡ Create Work Order
- **Location**: Ø¯Ø± ØµÙØ­Ù‡ AlertsØŒ Ú©Ù†Ø§Ø± Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Acknowledge Ùˆ Resolve
- **Style**: Gradient purple background
- **Behavior**: 
  - Ù†Ù…Ø§ÛŒØ´ ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ AlertÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Work Order Ù†Ø¯Ø§Ø±Ù†Ø¯
  - Ù†Ù…Ø§ÛŒØ´ "Creating..." Ø¯Ø± Ø­ÛŒÙ† Ø§ÛŒØ¬Ø§Ø¯
  - Ù†Ù…Ø§ÛŒØ´ Work Order ID Ù¾Ø³ Ø§Ø² Ø§ÛŒØ¬Ø§Ø¯ Ù…ÙˆÙÙ‚

### Work Order Info Panel
- **Location**: Ø¯Ø± Alert Card
- **Content**: Ù†Ù…Ø§ÛŒØ´ Work Order ID
- **Style**: Purple border Ùˆ background

## âš™ï¸ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ

### Environment Variables
```bash
# ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ ÛŒÚ©Ù¾Ø§Ø±Ú†Ú¯ÛŒ ERP
ERP_INTEGRATION_ENABLED=true

# URL Ø³Ø±ÙˆÛŒØ³ ERP
ERP_SERVICE_URL=http://erp-integration-service:8010

# Ø³ÛŒØ³ØªÙ… ERP Ù¾ÛŒØ´â€ŒÙØ±Ø¶
ERP_DEFAULT_SYSTEM=sap  # sap, oracle, maximo

# Ø§ÛŒØ¬Ø§Ø¯ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø±Ø§ÛŒ AlertÙ‡Ø§ÛŒ Ø¨Ø­Ø±Ø§Ù†ÛŒ
ERP_AUTO_CREATE_WORK_ORDERS=false  # true Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ
```

### Ø§ØªØµØ§Ù„ Ø¨Ù‡ ERP System
```bash
POST /api/erp-integration/erp/connect
{
  "erp_type": "sap",
  "base_url": "https://sap.example.com",
  "username": "user",
  "password": "pass",
  "client_id": "client123",
  "client_secret": "secret123"
}
```

## ğŸ”„ Ø¬Ø±ÛŒØ§Ù† Ú©Ø§Ø±

### Ø§ÛŒØ¬Ø§Ø¯ Ø®ÙˆØ¯Ú©Ø§Ø±
```
Alert Created (Critical)
    â”‚
    â–¼
Check ERP_AUTO_CREATE_WORK_ORDERS
    â”‚
    â–¼
Call ERP Service
    â”‚
    â–¼
Create Work Order in SAP/Oracle
    â”‚
    â–¼
Link Work Order ID to Alert
    â”‚
    â–¼
Update Alert.erp_work_order_id
```

### Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø³ØªÛŒ
```
User clicks "Create Work Order"
    â”‚
    â–¼
Check if Work Order exists
    â”‚
    â–¼
Call Alert Service endpoint
    â”‚
    â–¼
Alert Service calls ERP Service
    â”‚
    â–¼
Create Work Order
    â”‚
    â–¼
Update Alert and return Work Order ID
    â”‚
    â–¼
Display in UI
```

## ğŸ“Š Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Work Order

### Work Order Request
```json
{
  "alert_id": "ALERT-001",
  "equipment_id": "PUMP-001",
  "well_name": "PROD-001",
  "issue_description": "High pressure detected",
  "priority": "critical",
  "work_type": "repair",
  "estimated_duration": 120
}
```

### Work Order Response
```json
{
  "work_order_id": "SAP-WO-20250115103045",
  "erp_system": "SAP",
  "status": "created",
  "created_at": "2025-01-15T10:30:45Z",
  "erp_reference": "WOSAP-WO-20250115103045",
  "message": "Work order created successfully in SAP"
}
```

## âœ… ÙˆØ¶Ø¹ÛŒØª

- âœ… Endpoint Ø§ÛŒØ¬Ø§Ø¯ Work Order Ø¯Ø± Alert Service
- âœ… ÛŒÚ©Ù¾Ø§Ø±Ú†Ú¯ÛŒ Ø¨Ø§ ERP Service
- âœ… Ø¯Ú©Ù…Ù‡ Ø¯Ø± Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Alerts
- âœ… API client Ø¯Ø± frontend
- âœ… Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ CSS
- âœ… Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§Ù‡Ø§
- âœ… Ù†Ù…Ø§ÛŒØ´ Work Order ID
- âœ… Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø§ÛŒØ¬Ø§Ø¯ ØªÚ©Ø±Ø§Ø±ÛŒ
- âœ… Ø§ÛŒØ¬Ø§Ø¯ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø±Ø§ÛŒ AlertÙ‡Ø§ÛŒ Ø¨Ø­Ø±Ø§Ù†ÛŒ (Ù‚Ø§Ø¨Ù„ ØªÙ†Ø¸ÛŒÙ…)

## ğŸ¯ Ø§Ø³ØªÙØ§Ø¯Ù‡

### Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø³ØªÛŒ Work Order
1. Ø¨Ù‡ ØµÙØ­Ù‡ Alerts Ø¨Ø±ÙˆÛŒØ¯
2. Alert Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ù¾ÛŒØ¯Ø§ Ú©Ù†ÛŒØ¯
3. Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ "Create Work Order" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
4. Work Order ID Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯

### ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ø®ÙˆØ¯Ú©Ø§Ø±
```bash
# Ø¯Ø± .env ÛŒØ§ environment variables
ERP_AUTO_CREATE_WORK_ORDERS=true
ERP_DEFAULT_SYSTEM=sap
```

### Ø§ØªØµØ§Ù„ Ø¨Ù‡ ERP System
```bash
# Ø§Ø¨ØªØ¯Ø§ Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ ERP System Ù…ØªØµÙ„ Ø´ÙˆÛŒØ¯
POST /api/erp-integration/erp/connect
{
  "erp_type": "sap",
  "base_url": "https://sap.example.com",
  ...
}
```

## ğŸ“ Ù†Ú©Ø§Øª

- Work Order ÙÙ‚Ø· ÛŒÚ© Ø¨Ø§Ø± Ø¨Ø±Ø§ÛŒ Ù‡Ø± Alert Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯
- Ø¯Ø± ØµÙˆØ±Øª ÙˆØ¬ÙˆØ¯ Work OrderØŒ Ø¯Ú©Ù…Ù‡ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯
- Ø§ÛŒØ¬Ø§Ø¯ Ø®ÙˆØ¯Ú©Ø§Ø± ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ AlertÙ‡Ø§ÛŒ Ø¨Ø­Ø±Ø§Ù†ÛŒ ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯ (Ø§Ú¯Ø± ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯)
- Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø³ÛŒØ³ØªÙ… ERP Ø±Ø§ Ø§Ø² Ø·Ø±ÛŒÙ‚ query parameter Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ (sap, oracle)

## ğŸ” Troubleshooting

### Work Order Ø§ÛŒØ¬Ø§Ø¯ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯
1. Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Ú©Ù‡ ERP Service Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ Ø§Ø³Øª
2. Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Ú©Ù‡ Ø¨Ù‡ ERP System Ù…ØªØµÙ„ Ø´Ø¯Ù‡â€ŒØ§ÛŒØ¯
3. Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Alert Service Ùˆ ERP Service

### Ø¯Ú©Ù…Ù‡ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯
1. Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Ú©Ù‡ Alert Ø¯Ø§Ø±Ø§ÛŒ Work Order Ù†ÛŒØ³Øª
2. Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Ú©Ù‡ Alert Ø¯Ø± ÙˆØ¶Ø¹ÛŒØª open ÛŒØ§ acknowledged Ø§Ø³Øª

### Ø®Ø·Ø§ÛŒ Timeout
- Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Ú©Ù‡ ERP Service Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø³Øª
- Timeout Ø¨Ù‡ ØµÙˆØ±Øª Ù¾ÛŒØ´â€ŒÙØ±Ø¶ 30 Ø«Ø§Ù†ÛŒÙ‡ Ø§Ø³Øª

